<div class="criar-playlist-container">
  <h2>Criar nova playlist</h2>

  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <div class="form-row">
      <label for="titulo">Título *</label>
      <input
        id="titulo"
        formControlName="titulo"
        type="text"
        placeholder="Nome da playlist"
      />
      <div class="error" *ngIf="titulo?.touched && titulo?.invalid">
        <small *ngIf="titulo?.errors?.['required']"
          >O título é obrigatório.</small
        >
        <small *ngIf="titulo?.errors?.['minlength']"
          >Digite ao menos 2 caracteres.</small
        >
      </div>
    </div>

    <div class="form-row">
      <label for="descricao">Descrição</label>
      <textarea
        id="descricao"
        formControlName="descricao"
        rows="4"
        placeholder="Descrição (opcional)"
      ></textarea>
    </div>

    <div class="form-row">
      <label for="imagemUrl">URL da imagem (opcional)</label>
      <input
        id="imagemUrl"
        formControlName="imagemUrl"
        type="url"
        placeholder="https://..."
      />
    </div>

    <div class="preview" *ngIf="imagemPreview">
      <p>Preview da capa:</p>
      <img
        [src]="imagemPreview"
        alt="Preview da imagem da playlist"
        (error)="imagemPreview = null"
      />
    </div>

    <div class="actions">
      <button type="submit" class="btn btn-primary" [disabled]="carregando">
        Criar
      </button>
      <button
        type="button"
        class="btn btn-secondary"
        (click)="cancelar()"
        [disabled]="carregando"
      >
        Cancelar
      </button>
    </div>

    <div class="form-error" *ngIf="erroMsg">
      <p>{{ erroMsg }}</p>
    </div>
  </form>
</div>
