<header class="header-site">
  <title>{{ livro?.titulo }}</title>
  <a href="/">
    <img
      src="/assets/images/logo-site/logo-site.svg"
      alt="Logo do Site"
      class="logo-site"
    />
  </a>
</header>

<!-- Loading State -->
<div *ngIf="carregando" class="loading-container">
  <div class="spinner"></div>
  <p>Carregando detalhes do livro...</p>
</div>

<!-- Error State -->
<div *ngIf="erro && !carregando" class="error-container">
  <h2>Erro ao carregar o livro</h2>
  <p>Não foi possível encontrar os detalhes do livro solicitado.</p>
  <button (click)="carregarLivro(1)" class="btn-retry">Tentar Novamente</button>
</div>

<!-- Book Details -->
<div *ngIf="livro && !carregando && !erro" class="livro-detalhes">
  <div class="container">
    <div class="livro-header">
      <div class="capa-container">
        <img
          [src]="livro.urlCapa"
          [alt]="'Capa do livro ' + livro.titulo"
          class="capa-livro"
          (error)="onImageError($event)"
        />
      </div>

      <div class="info-container">
        <h1 class="titulo-livro">{{ livro.titulo }}</h1>
        <a href="/autores/:{{ livro.idAutor }}">
          <h2 class="nome-autor">{{ livro.nomeAutor }}</h2>
        </a>

        <div class="acoes">
          <button (click)="continuarLendo()" class="btn btn-primary">
            CONTINUAR LENDO
          </button>
          <button (click)="lerDoInicio()" class="btn btn-secondary">
            LER DO INÍCIO
          </button>

          <div class="icones-acoes">
            <button
              (click)="adicionarAosFavoritos()"
              class="btn-icon"
              title="Adicionar aos favoritos"
            >
              <svg class="icon-star" viewBox="0 0 24 24">
                <path
                  d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                  [class.filled]="favorito"
                />
              </svg>
            </button>

            <button
              (click)="toggleFavorito()"
              class="btn-icon"
              title="Favoritar"
            ></button>
          </div>
        </div>
      </div>
    </div>

    <div class="detalhes-adicionais">
      <div class="info-item">
        <span class="label">Quantidade de Páginas:</span>
        <span class="valor">{{ livro.totalPaginas }}</span>
      </div>

      <div class="info-item">
        <span class="label">Ano de Publicação:</span>
        <span class="valor">{{ livro.anoPublicacao }}</span>
      </div>

      <div class="info-item">
        <span class="label">Gênero:</span>
        <span class="valor">{{ livro.genero }}</span>
      </div>

      <!-- Rating com estrelas -->
      <div class="info-item" *ngIf="livro && livro.nota > 0">
        <span class="label">Avaliação:</span>
        <div class="rating">
          <span
            *ngFor="let estrela of gerarEstrelas(livro.nota)"
            class="star"
            [class.filled]="estrela === 1"
          >
            ★
          </span>
          <span class="rating-number">({{ livro.nota }}/5)</span>
        </div>
      </div>
    </div>

    <div class="sinopse-section">
      <h3>Sinopse</h3>
      <p class="sinopse-texto">{{ livro.sinopse }}</p>
    </div>
  </div>
</div>
